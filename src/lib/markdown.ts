import fs from 'fs';
import path from 'path';
import matter from 'gray-matter';

// Base interfaces
export interface BaseContent {
  title: string;
  description: string;
  keywords: string[];
  author?: string;
  date?: string;
  lang?: string;
  schema_markup?: string;
}

// Accueil content interface
export interface AccueilContent extends BaseContent {
  heroTitle: string;
  heroSubtitle: string;
  heroDescription: string;
  heroSignature: string;
  projects: {
    soluna: {
      title: string;
      subtitle: string;
      description: string;
      signatures: string[];
    };
    elBarakah: {
      title: string;
      subtitle: string;
      description: string;
      signatures: string[];
    };
    cittaVerde: {
      title: string;
      subtitle: string;
      description: string;
      signatures: string[];
    };
  };
  stats: {
    years: string;
    projects: string;
    families: string;
    satisfaction: string;
  };
}

// A Propos content interface
export interface AProposContent extends BaseContent {
  heroTitle: string;
  heroSubtitle: string;
  heroDescription: string;
  history: {
    title: string;
    periods: {
      years: string;
      title: string;
      description: string;
    }[];
  };
  vision: {
    title: string;
    subtitle: string;
    description: string;
    pillars: {
      title: string;
      subtitle: string;
      description: string;
    }[];
  };
  values: {
    title: string;
    values: {
      name: string;
      subtitle: string;
      description: string;
    }[];
  };
}

// Soluna content interface
export interface SolunaContent extends BaseContent {
  heroTitle: string;
  heroSubtitle: string;
  heroDescription: string;
  location: string;
  overview: {
    title: string;
    description: string;
    features: {
      title: string;
      description: string;
    }[];
  };
  apartments: {
    title: string;
    types: {
      name: string;
      subtitle: string;
      surface: string;
      rooms: number;
      bathrooms: number;
      price: string;
      description: string;
      features: string[];
      idealFor: string;
      image: string;
    }[];
  };
  amenities: {
    title: string;
    description: string;
    categories: {
      name: string;
      items: {
        name: string;
        description: string;
      }[];
    }[];
  };
  location_details: {
    title: string;
    description: string;
    proximities: {
      category: string;
      items: {
        name: string;
        distance: string;
        type: string;
      }[];
    }[];
  };
  testimonials: {
    title: string;
    items: {
      name: string;
      age?: number;
      profession: string;
      rating: number;
      comment: string;
      apartment: string;
      purchaseDate: string;
      highlight: string;
    }[];
  };
  contact: {
    title: string;
    description: string;
    info: {
      phone: string;
      email: string;
      address: string;
      hours: string;
    };
  };
}

// El Barakah content interface
export interface ElBarakahContent extends BaseContent {
  heroTitle: string;
  heroSubtitle: string;
  heroDescription: string;
  location: string;
  overview: {
    title: string;
    description: string;
    features: {
      title: string;
      description: string;
    }[];
  };
  apartments: {
    title: string;
    types: {
      name: string;
      subtitle: string;
      surface: string;
      rooms: number;
      bathrooms: number;
      price: string;
      description: string;
      features: string[];
      idealFor: string;
      image: string;
    }[];
  };
  amenities: {
    title: string;
    description: string;
    categories: {
      name: string;
      items: {
        name: string;
        description: string;
      }[];
    }[];
  };
  location_details: {
    title: string;
    description: string;
    proximities: {
      category: string;
      items: {
        name: string;
        distance: string;
        type: string;
      }[];
    }[];
  };
  regional_impact: {
    title: string;
    description: string;
    aspects: {
      title: string;
      description: string;
    }[];
  };
  testimonials: {
    title: string;
    items: {
      name: string;
      profession: string;
      comment: string;
      apartment: string;
    }[];
  };
  contact: {
    title: string;
    description: string;
    info: {
      phone: string;
      email: string;
      address: string;
      hours: string;
    };
  };
}

// Citta Verde content interface
export interface CittaVerdeContent extends BaseContent {
  heroTitle: string;
  heroSubtitle: string;
  heroDescription: string;
  location: string;
  overview: {
    title: string;
    description: string;
    features: {
      title: string;
      description: string;
    }[];
  };
  plots: {
    title: string;
    types: {
      name: string;
      subtitle: string;
      surface: string;
      elevation: string;
      price: string;
      description: string;
      features: string[];
      idealFor: string;
      image: string;
    }[];
  };
  sustainability: {
    title: string;
    description: string;
    features: {
      title: string;
      description: string;
    }[];
  };
  infrastructure: {
    title: string;
    description: string;
    categories: {
      name: string;
      items: string[];
    }[];
  };
  location_details: {
    title: string;
    description: string;
    proximities: {
      category: string;
      items: {
        name: string;
        distance: string;
        type: string;
      }[];
    }[];
  };
  testimonials: {
    title: string;
    items: {
      name: string;
      profession: string;
      comment: string;
      plotType: string;
    }[];
  };
  contact: {
    title: string;
    description: string;
    info: {
      phone: string;
      email: string;
      address: string;
      hours: string;
    };
  };
}

// Nos Projets content interface
export interface NosProjetsContent extends BaseContent {
  heroTitle: string;
  heroSubtitle: string;
  heroDescription: string;
  projects: {
    soluna: {
      title: string;
      subtitle: string;
      location: string;
      type: string;
      description: string;
      features: string[];
      priceRange: string;
    };
    elBarakah: {
      title: string;
      subtitle: string;
      location: string;
      type: string;
      description: string;
      features: string[];
      priceRange: string;
    };
    cittaVerde: {
      title: string;
      subtitle: string;
      location: string;
      type: string;
      description: string;
      features: string[];
      priceRange: string;
    };
  };
  comparison: {
    title: string;
    description: string;
    table: {
      headers: string[];
      rows: {
        criteria: string;
        soluna: string;
        elBarakah: string;
        cittaVerde: string;
      }[];
    };
    guide: {
      soluna: string[];
      elBarakah: string[];
      cittaVerde: string[];
    };
  };
  process: {
    title: string;
    description: string;
    steps: {
      title: string;
      description: string;
    }[];
  };
}

// Actualites content interface
export interface ActualitesContent extends BaseContent {
  heroTitle: string;
  heroSubtitle: string;
  heroDescription: string;
  articles: {
    title: string;
    date: string;
    category: string;
    excerpt: string;
    content: string;
    image: string;
    slug: string;
    featured: boolean;
  }[];
  events: {
    title: string;
    date: string;
    location: string;
    description: string;
    type: string;
  }[];
  press: {
    title: string;
    source: string;
    date: string;
    excerpt: string;
    link?: string;
  }[];
}

// Contact content interface
export interface ContactContent extends BaseContent {
  heroTitle: string;
  heroSubtitle: string;
  heroDescription: string;
  mainOffice: {
    title: string;
    address: string;
    phone: string;
    email: string;
    hours: string;
  };
  salesOffices: {
    title: string;
    offices: {
      name: string;
      location: string;
      address: string;
      phone: string;
      email: string;
      hours: string;
    }[];
  };
  team: {
    title: string;
    members: {
      name: string;
      position: string;
      phone: string;
      email: string;
      specialties: string[];
    }[];
  };
  form: {
    title: string;
    description: string;
    fields: {
      name: string;
      label: string;
      type: string;
      required: boolean;
      options?: string[];
    }[];
  };
}

// Project type for unified project data
export interface Project {
  id: string;
  name: string;
  subtitle: string;
  location: string;
  type: string;
  description: string;
  image: string;
  theme: 'soluna' | 'barakah' | 'verde';
  features: string[];
  stats: {
    surface: string;
    units: string;
    delivery: string;
  };
  priceRange: string;
}

// Parse Accueil content
export function parseAccueilContent(): AccueilContent {
  const filePath = path.join(process.cwd(), '01-accueil.md');
  const fileContents = fs.readFileSync(filePath, 'utf8');
  const { data, content } = matter(fileContents);
  
  // Extract hero section
  const heroTitleMatch = content.match(/# \*\*GROUPE MAJAIDRI\*\*\s+## \*(.+)\*/);
  const heroSubtitleMatch = content.match(/## \*(.+)\*/);
  const heroDescriptionMatch = content.match(/Depuis trois d√©cennies, \*\*Groupe Majaidri\*\* (.+?)\n\n/);
  const heroSignatureMatch = content.match(/\*"(.+?)"\*/);

  // Extract projects
  const solunaMatch = content.match(/### SOLUNA - (.+?)\n([\s\S]*?)### EL BARAKAH/);
  const elBarakahMatch = content.match(/### EL BARAKAH - (.+?)\n([\s\S]*?)### CITT√Ä VERDE/);
  const cittaVerdeMatch = content.match(/### CITT√Ä VERDE - (.+?)\n([\s\S]*?)---/);

  // Extract stats
  const statsMatch = content.match(/- \*\*üèÜ (\d+) ans\*\* d'expertise immobili√®re\s+- \*\*üèòÔ∏è (\d+)\+\*\* familles accompagn√©es\s+- \*\*üåü (\d+)\*\* univers r√©sidentiels d'exception\s+- \*\*üéØ (\d+)%\*\* de satisfaction client/);

  return {
    title: data.title || 'Groupe Majaidri',
    description: data.description || '',
    keywords: data.keywords ? data.keywords.split(', ') : [],
    author: data.author || 'Groupe Majaidri',
    date: data.date || new Date().toISOString(),
    lang: data.lang || 'fr',
    schema_markup: data.schema_markup || '',
    
    heroTitle: 'GROUPE MAJAIDRI',
    heroSubtitle: heroSubtitleMatch ? heroSubtitleMatch[1] : 'Gardiens de l\'Art Immobilier Marocain',
    heroDescription: heroDescriptionMatch ? heroDescriptionMatch[1] : 'Depuis trois d√©cennies, Groupe Majaidri sculpte l\'avenir r√©sidentiel du Maroc avec la passion de l\'artisan et la vision du pionnier.',
    heroSignature: heroSignatureMatch ? heroSignatureMatch[1] : 'L√† o√π l\'Excellence Rencontre l\'Authenticit√©',
    
    projects: {
      soluna: {
        title: 'SOLUNA - L\'Harmonie C√©leste',
        subtitle: 'Mohammedia - Luxe Contemporain',
        description: 'Dans l\'√©crin prestigieux de Mohammedia, SOLUNA r√©v√®le l\'art de vivre contemporain marocain. 120 r√©sidences d\'exception o√π l\'architecture √©pur√©e dialogue avec les jardins suspendus.',
        signatures: [
          'Architecture Bioclimatique',
          'Piscine Infinity',
          'Jardins Th√©matiques',
          'Wellness Center'
        ]
      },
      elBarakah: {
        title: 'EL BARAKAH - La B√©n√©diction Familiale',
        subtitle: 'Casablanca - Premium Familial',
        description: 'EL BARAKAH c√©l√®bre l\'art de vivre en famille dans un √©crin de verdure au c≈ìur de Casablanca. 200 r√©sidences pens√©es pour l\'√©panouissement de chaque g√©n√©ration.',
        signatures: [
          'Espaces Multig√©n√©rationnels',
          'Complexe Sportif',
          'Verger Communautaire',
          'S√©curit√© Familiale'
        ]
      },
      cittaVerde: {
        title: 'CITT√Ä VERDE - L\'√âden Contemporain',
        subtitle: 'Benslimane - √âco-Luxe Italien',
        description: 'CITT√Ä VERDE r√©invente l\'art de vivre durable √† Benslimane. 45 parcelles d\'exception o√π l\'√©co-luxe italien rencontre l\'innovation marocaine.',
        signatures: [
          'R√©volution √âcologique',
          'L\'Or Bleu Pr√©serv√©',
          '√âconomie Circulaire',
          'Mobilit√© Verte'
        ]
      }
    },
    
    stats: {
      years: statsMatch ? statsMatch[1] : '27',
      families: statsMatch ? statsMatch[2] : '15000',
      projects: '3',
      satisfaction: statsMatch ? statsMatch[4] : '98'
    }
  };
}

// Parse Soluna content
export function parseSolunaContent(): SolunaContent {
  const filePath = path.join(process.cwd(), '03-projet-soluna.md');
  const fileContents = fs.readFileSync(filePath, 'utf8');
  const { data, content } = matter(fileContents);
  
  // Extract hero section
  const heroTitleMatch = content.match(/# SOLUNA - (.+)/);
  const heroSubtitleMatch = content.match(/\*"(.+?)"\*/);
  const heroDescriptionMatch = content.match(/Au c≈ìur de Casablanca, SOLUNA (.+?)\n\n/);
  
  // Extract apartments
  const apartmentsSection = content.match(/## Section Types d'Appartements([\s\S]*?)---/);
  const apartmentTypes = [];
  
  if (apartmentsSection) {
    const apartmentMatches = apartmentsSection[1].match(/#### \*\*"(.+?)"\*\* - (.+?)\n([\s\S]*?)(?=#### |$)/g);
    
    if (apartmentMatches) {
      apartmentMatches.forEach(apartmentMatch => {
        const nameMatch = apartmentMatch.match(/#### \*\*"(.+?)"\*\* - (.+?)\n/);
        const surfaceMatch = apartmentMatch.match(/- \*\*Surface (.+?)\*\* : (.+?) d'art de vivre/);
        const descriptionMatch = apartmentMatch.match(/- \*\*Composition (.+?)\*\* :\s+([\s\S]*?)- \*\*Terrasse/);
        const featuresMatch = apartmentMatch.match(/- \*\*Signature SOLUNA\*\* : (.+)/);
        const idealForMatch = apartmentMatch.match(/- \*\*Id√©al pour\*\* : (.+)/);
        const priceMatch = apartmentMatch.match(/√Ä partir de (.+?) Dhs/);
        
        if (nameMatch) {
          apartmentTypes.push({
            name: nameMatch[1],
            subtitle: nameMatch[2],
            surface: surfaceMatch ? surfaceMatch[2] : '85-180m¬≤',
            rooms: nameMatch[1].includes('2 Pi√®ces') ? 2 : nameMatch[1].includes('3 Pi√®ces') ? 3 : 4,
            bathrooms: nameMatch[1].includes('2 Pi√®ces') ? 1 : nameMatch[1].includes('3 Pi√®ces') ? 2 : 3,
            price: priceMatch ? priceMatch[1] : 'Sur demande',
            description: descriptionMatch ? descriptionMatch[2].trim() : '',
            features: featuresMatch ? featuresMatch[1].split(', ') : [],
            idealFor: idealForMatch ? idealForMatch[1] : '',
            image: `https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80`
          });
        }
      });
    }
  }
  
  // Extract amenities
  const amenitiesSection = content.match(/## Section √âquipements & Services([\s\S]*?)---/);
  const amenitiesCategories = [];
  
  if (amenitiesSection) {
    const categoryMatches = amenitiesSection[1].match(/#### üèä‚Äç‚ôÇÔ∏è (.+?)\n([\s\S]*?)(?=#### |$)/g);
    
    if (categoryMatches) {
      categoryMatches.forEach(categoryMatch => {
        const nameMatch = categoryMatch.match(/#### üèä‚Äç‚ôÇÔ∏è (.+?)\n/);
        const itemsMatch = categoryMatch.match(/- \*\*(.+?)\*\* (.+?)\n/g);
        
        if (nameMatch && itemsMatch) {
          const items = itemsMatch.map(item => {
            const itemParts = item.match(/- \*\*(.+?)\*\* (.+?)\n/);
            return {
              name: itemParts ? itemParts[1] : '',
              description: itemParts ? itemParts[2] : ''
            };
          });
          
          amenitiesCategories.push({
            name: nameMatch[1],
            items: items
          });
        }
      });
    }
  }
  
  // Extract location details
  const locationSection = content.match(/## Section Environnement & Proximit√©s([\s\S]*?)---/);
  const proximityCategories = [];
  
  if (locationSection) {
    const categoryMatches = locationSection[1].match(/#### üéì (.+?)\n([\s\S]*?)(?=#### |$)/g);
    
    if (categoryMatches) {
      categoryMatches.forEach(categoryMatch => {
        const nameMatch = categoryMatch.match(/#### üéì (.+?)\n/);
        const itemsMatch = categoryMatch.match(/- \*\*(.+?)\*\* - (.+?)\n/g);
        
        if (nameMatch && itemsMatch) {
          const items = itemsMatch.map(item => {
            const itemParts = item.match(/- \*\*(.+?)\*\* - (.+?)\n/);
            return {
              name: itemParts ? itemParts[1] : '',
              distance: itemParts ? itemParts[2] : '',
              type: ''
            };
          });
          
          proximityCategories.push({
            category: nameMatch[1],
            items: items
          });
        }
      });
    }
  }
  
  // Extract testimonials
  const testimonialsSection = content.match(/## Section T√©moignages([\s\S]*?)---/);
  const testimonials = [];
  
  if (testimonialsSection) {
    const testimonialMatches = testimonialsSection[1].match(/#### (.+?) - (.+?)\n\*"(.+?)"\*/g);
    
    if (testimonialMatches) {
      testimonialMatches.forEach(testimonialMatch => {
        const parts = testimonialMatch.match(/#### (.+?) - (.+?)\n\*"(.+?)"\*/);
        
        if (parts) {
          testimonials.push({
            name: parts[1],
            profession: parts[2],
            rating: 5,
            comment: parts[3],
            apartment: 'Appartement SOLUNA',
            purchaseDate: 'Janvier 2024',
            highlight: 'Satisfaction exceptionnelle'
          });
        }
      });
    }
  }
  
  return {
    title: data.title || 'SOLUNA - L\'√âclat √âternel de l\'Excellence',
    description: data.description || '',
    keywords: data.keywords ? data.keywords.split(', ') : [],
    author: data.author || 'Groupe Majaidri',
    date: data.date || new Date().toISOString(),
    lang: data.lang || 'fr',
    schema_markup: data.schema_markup || '',
    
    heroTitle: heroTitleMatch ? heroTitleMatch[1] : 'L\'√âclat √âternel de l\'Excellence',
    heroSubtitle: heroSubtitleMatch ? heroSubtitleMatch[1] : 'Une Symphonie Architecturale en Terre de Lumi√®re',
    heroDescription: heroDescriptionMatch ? heroDescriptionMatch[1] : 'Au c≈ìur de Casablanca, SOLUNA transcende l\'ordinaire pour devenir une ≈ìuvre d\'art habit√©e.',
    location: 'Casablanca - Proximit√© Bouskoura & California',
    
    overview: {
      title: 'SOLUNA : O√π le Luxe Rencontre la Nature',
      description: 'SOLUNA repr√©sente l\'aboutissement de notre vision architecturale moderne. Cette r√©sidence exclusive combine harmonieusement design contemporain et espaces verts g√©n√©reux.',
      features: [
        {
          title: '2 Hectares de Verdure',
          description: 'Parc paysager central de 2 hectares avec jardins th√©matiques et espaces de d√©tente.'
        },
        {
          title: 'Architecture d\'Exception',
          description: 'Design contemporain sign√© par des architectes renomm√©s avec fa√ßades √©l√©gantes aux lignes √©pur√©es.'
        },
        {
          title: 'Localisation Strat√©gique',
          description: 'Proximit√© imm√©diate de Bouskoura et acc√®s facile au quartier California.'
        },
        {
          title: 'S√©curit√© & Services',
          description: 'R√©sidence ferm√©e et s√©curis√©e 24h/24 avec gardiennage professionnel et services de conciergerie.'
        }
      ]
    },
    
    apartments: {
      title: 'Nos R√©sidences : Des Espaces de Vie Raffin√©s',
      types: apartmentTypes.length > 0 ? apartmentTypes : [
        {
          name: 'Le Cocon Solaire',
          subtitle: 'Appartement 2 Pi√®ces d\'Exception',
          surface: '65-75 m¬≤',
          rooms: 2,
          bathrooms: 1,
          price: '√Ä partir de 850K Dhs',
          description: 'Suite parentale avec dressing int√©gr√©, salon-s√©jour baign√© de lumi√®re, cuisine ouverte √©quip√©e (Miele/Bosch), salle de bain spa avec douche √† l\'italienne.',
          features: ['Terrasse priv√©e 15-20 m¬≤', 'Parquet ch√™ne massif', 'Domotique int√©gr√©e', 'Climatisation r√©versible'],
          idealFor: 'Jeunes couples raffin√©s, pied-√†-terre de luxe, investissement premium',
          image: 'https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80'
        },
        {
          name: 'L\'Harmonie Lunaire',
          subtitle: 'Appartement 3 Pi√®ces Familial',
          surface: '85-95 m¬≤',
          rooms: 3,
          bathrooms: 2,
          price: '√Ä partir de 1.2M Dhs',
          description: '2 chambres avec placards sur-mesure, salon-s√©jour avec coin lecture, cuisine am√©ricaine haut de gamme, 2 salles d\'eau (dont une avec baignoire), cellier/buanderie.',
          features: ['Terrasse familiale 20-25 m¬≤', 'Isolation phonique renforc√©e', '√âclairage LED intelligent', 'Prises USB int√©gr√©es'],
          idealFor: 'Familles modernes, premiers acheteurs exigeants',
          image: 'https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80'
        },
        {
          name: 'Le Palais Stellaire',
          subtitle: 'Appartement 4 Pi√®ces Prestige',
          surface: '110-130 m¬≤',
          rooms: 4,
          bathrooms: 3,
          price: '√Ä partir de 2.2M Dhs',
          description: 'Suite parentale (25m¬≤) avec dressing et salle de bain privative, 2 chambres enfants avec salle de bain partag√©e, double salon (r√©ception + intimit√©), cuisine √Ælot central avec coin petit-d√©jeuner, bureau/biblioth√®que, WC invit√©s avec lave-mains design.',
          features: ['Terrasse panoramique 30-40 m¬≤', 'Hauteur sous plafond 3m', 'Chemin√©e design', 'Cave √† vin climatis√©e'],
          idealFor: 'Familles d\'exception, dirigeants, investisseurs patrimoniaux',
          image: 'https://images.unsplash.com/photo-1560448075-bb485b067938?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80'
        }
      ]
    },
    
    amenities: {
      title: '√âquipements Premium : Votre Confort au Quotidien',
      description: 'SOLUNA offre une gamme compl√®te d\'√©quipements et de services pens√©s pour transformer chaque jour en une exp√©rience d\'exception.',
      categories: amenitiesCategories.length > 0 ? amenitiesCategories : [
        {
          name: 'Le Sanctuaire Aquatique',
          items: [
            {
              name: 'Piscine Infinity',
              description: 'Bassin de 25m avec d√©bordement spectaculaire'
            },
            {
              name: 'Espace Wellness',
              description: 'Hammam traditionnel + Sauna finlandais'
            },
            {
              name: 'Pool House',
              description: 'Salon d\'√©t√© avec cuisine d\'√©t√© √©quip√©e'
            }
          ]
        },
        {
          name: 'L\'Atelier du Bien-√ätre',
          items: [
            {
              name: 'Salle de Sport Premium',
              description: '√âquipements Technogym derni√®re g√©n√©ration'
            },
            {
              name: 'Studio Yoga/Pilates',
              description: 'Espace zen avec vue sur jardins'
            },
            {
              name: 'Espace Cardio',
              description: 'Machines connect√©es avec √©crans individuels'
            }
          ]
        },
        {
          name: 'Les Jardins d\'√âden',
          items: [
            {
              name: 'Jardins Th√©matiques',
              description: 'M√©diterran√©en, Andalou, Contemporain'
            },
            {
              name: 'All√©es Parfum√©es',
              description: 'Jasmin, oranger, lavande'
            },
            {
              name: 'Espaces de M√©ditation',
              description: 'Coins secrets pour la contemplation'
            }
          ]
        },
        {
          name: 'S√©curit√© & Conciergerie',
          items: [
            {
              name: 'Gardiennage Premium',
              description: '24h/24 avec formation h√¥teli√®re'
            },
            {
              name: 'Vid√©osurveillance Intelligente',
              description: 'IA de reconnaissance faciale'
            },
            {
              name: 'Conciergerie Lifestyle',
              description: 'Services sur-mesure (m√©nage, courses, r√©servations)'
            },
            {
              name: 'Parking Intelligent',
              description: 'Syst√®me de guidage automatique'
            }
          ]
        }
      ]
    },
    
    location_details: {
      title: 'Un Cadre de Vie Exceptionnel',
      description: 'SOLUNA b√©n√©ficie d\'un emplacement privil√©gi√© √† Casablanca, offrant un acc√®s facile √† tous les services essentiels et lieux d\'int√©r√™t.',
      proximities: proximityCategories.length > 0 ? proximityCategories : [
        {
          category: '√âducation',
          items: [
            {
              name: '√âcole Internationale',
              distance: '5 min',
              type: 'Enseignement de qualit√©'
            },
            {
              name: 'Lyc√©e Fran√ßais',
              distance: '8 min',
              type: 'Cursus fran√ßais'
            },
            {
              name: 'Universit√© Hassan II',
              distance: '15 min',
              type: 'Enseignement sup√©rieur'
            },
            {
              name: 'Cr√®ches priv√©es',
              distance: '3 min',
              type: 'Petite enfance'
            }
          ]
        },
        {
          category: 'Sant√©',
          items: [
            {
              name: 'Clinique Internationale',
              distance: '7 min',
              type: 'Soins sp√©cialis√©s'
            },
            {
              name: 'Pharmacies',
              distance: '2 min',
              type: 'Pharmacies de garde'
            },
            {
              name: 'Centre m√©dical',
              distance: '5 min',
              type: 'M√©decine g√©n√©rale'
            },
            {
              name: 'H√¥pital Ibn Rochd',
              distance: '20 min',
              type: 'Urgences 24h/24'
            }
          ]
        },
        {
          category: 'Shopping & Loisirs',
          items: [
            {
              name: 'Morocco Mall',
              distance: '15 min',
              type: 'Centre commercial'
            },
            {
              name: 'Anfaplace',
              distance: '12 min',
              type: 'Shopping & loisirs'
            },
            {
              name: 'Restaurants gastronomiques',
              distance: '5 min',
              type: 'Haute cuisine'
            },
            {
              name: 'Cin√©mas',
              distance: '10 min',
              type: 'Divertissement'
            }
          ]
        },
        {
          category: 'Transports',
          items: [
            {
              name: 'A√©roport Mohammed V',
              distance: '25 min',
              type: 'Vols internationaux'
            },
            {
              name: 'Gare Casa-Port',
              distance: '30 min',
              type: 'Transport ferroviaire'
            },
            {
              name: 'Tramway',
              distance: '10 min',
              type: 'Transport urbain'
            },
            {
              name: 'Autoroutes',
              distance: 'Acc√®s direct',
              type: 'R√©seau autoroutier'
            }
          ]
        }
      ]
    },
    
    testimonials: {
      title: 'Ils Ont Choisi SOLUNA',
      items: testimonials.length > 0 ? testimonials : [
        {
          name: 'Nadia L.',
          age: 37,
          profession: 'Investisseuse immobili√®re',
          rating: 5,
          comment: 'Je cherchais un investissement rentable et s√©curis√©. Soluna m\'a pr√©sent√© 3 opportunit√©s exclusives adapt√©es √† mon budget. J\'ai finalis√© l\'achat en moins de 45 jours.',
          apartment: 'Harmonie Lunaire 3P',
          purchaseDate: 'Mars 2024',
          highlight: 'Processus d\'achat ultra-rapide'
        },
        {
          name: 'Yassine K.',
          age: 50,
          profession: 'Consultant',
          rating: 5,
          comment: 'D√®s notre premier rendez-vous, j\'ai √©t√© impressionn√© par leur expertise. Leur disponibilit√© est remarquable : j\'ai re√ßu une r√©ponse √† mes questions en moins de 24 heures.',
          apartment: 'Palais Stellaire 4P',
          purchaseDate: 'Janvier 2024',
          highlight: 'Service client exceptionnel'
        },
        {
          name: 'Famille Bennani',
          profession: 'Propri√©taires r√©sidents',
          rating: 5,
          comment: 'SOLUNA a d√©pass√© toutes nos attentes. La qualit√© des finitions, les espaces verts magnifiques et la tranquillit√© du lieu en font un v√©ritable havre de paix en pleine ville.',
          apartment: 'Harmonie Lunaire 3P',
          purchaseDate: 'F√©vrier 2024',
          highlight: 'Qualit√© de vie exceptionnelle'
        }
      ]
    },
    
    contact: {
      title: 'D√©couvrez SOLUNA : Votre Futur Commence Ici',
      description: 'Notre √©quipe SOLUNA vous accompagne dans la d√©couverte de votre futur appartement d\'exception.',
      info: {
        phone: '+212 522 XXX XXX',
        email: 'soluna@groupemajaidri.ma',
        address: 'R√©sidence SOLUNA, Casablanca',
        hours: 'Lun-Sam 9h-19h, Dim 10h-16h'
      }
    }
  };
}

// Parse El Barakah content
export function parseElBarakahContent(): ElBarakahContent {
  const filePath = path.join(process.cwd(), '04-projet-el-barakah.md');
  const fileContents = fs.readFileSync(filePath, 'utf8');
  const { data, content } = matter(fileContents);
  
  // Extract hero section
  const heroTitleMatch = content.match(/# EL BARAKAH - (.+)/);
  const heroSubtitleMatch = content.match(/\*"(.+?)"\*/);
  const heroDescriptionMatch = content.match(/EL BARAKAH transcende l'habitat (.+?)\n\n/);
  
  // Extract apartments
  const apartmentsSection = content.match(/## Collection Familiale d'Exception([\s\S]*?)---/);
  const apartmentTypes = [];
  
  if (apartmentsSection) {
    const apartmentMatches = apartmentsSection[1].match(/### \*\*"(.+?)"\*\* - (.+?)\n([\s\S]*?)(?=### |$)/g);
    
    if (apartmentMatches) {
      apartmentMatches.forEach(apartmentMatch => {
        const nameMatch = apartmentMatch.match(/### \*\*"(.+?)"\*\* - (.+?)\n/);
        const surfaceMatch = apartmentMatch.match(/- \*\*Surface (.+?)\*\* : (.+?) de (.+?)\n/);
        const descriptionMatch = apartmentMatch.match(/- \*\*Composition (.+?)\*\* :\s+([\s\S]*?)- \*\*(.+?) (.+?)\*\* :/);
        const featuresMatch = apartmentMatch.match(/- \*\*Signature EL BARAKAH\*\* : (.+)/);
        const idealForMatch = apartmentMatch.match(/- \*\*Id√©al pour\*\* : (.+)/);
        
        if (nameMatch) {
          apartmentTypes.push({
            name: nameMatch[1],
            subtitle: nameMatch[2],
            surface: surfaceMatch ? surfaceMatch[2] : '70-120m¬≤',
            rooms: nameMatch[1].includes('2 Pi√®ces') ? 2 : nameMatch[1].includes('3 Pi√®ces') ? 3 : nameMatch[1].includes('4 Pi√®ces') ? 4 : 5,
            bathrooms: nameMatch[1].includes('2 Pi√®ces') ? 1 : nameMatch[1].includes('3 Pi√®ces') ? 2 : 3,
            price: '√Ä partir de 320 000 Dhs',
            description: descriptionMatch ? descriptionMatch[2].trim() : '',
            features: featuresMatch ? featuresMatch[1].split(', ') : [],
            idealFor: idealForMatch ? idealForMatch[1] : '',
            image: `https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80`
          });
        }
      });
    }
  }
  
  // Extract amenities
  const amenitiesSection = content.match(/## Section √âquipements & Services([\s\S]*?)---/);
  const amenitiesCategories = [];
  
  if (amenitiesSection) {
    const categoryMatches = amenitiesSection[1].match(/#### üèä‚Äç‚ôÇÔ∏è (.+?)\n([\s\S]*?)(?=#### |$)/g);
    
    if (categoryMatches) {
      categoryMatches.forEach(categoryMatch => {
        const nameMatch = categoryMatch.match(/#### üèä‚Äç‚ôÇÔ∏è (.+?)\n/);
        const itemsMatch = categoryMatch.match(/- \*\*(.+?)\*\* (.+?)\n/g);
        
        if (nameMatch && itemsMatch) {
          const items = itemsMatch.map(item => {
            const itemParts = item.match(/- \*\*(.+?)\*\* (.+?)\n/);
            return {
              name: itemParts ? itemParts[1] : '',
              description: itemParts ? itemParts[2] : ''
            };
          });
          
          amenitiesCategories.push({
            name: nameMatch[1],
            items: items
          });
        }
      });
    }
  }
  
  // Extract location details
  const locationSection = content.match(/## Section Environnement & Proximit√©s([\s\S]*?)---/);
  const proximityCategories = [];
  
  if (locationSection) {
    const categoryMatches = locationSection[1].match(/#### üéì (.+?)\n([\s\S]*?)(?=#### |$)/g);
    
    if (categoryMatches) {
      categoryMatches.forEach(categoryMatch => {
        const nameMatch = categoryMatch.match(/#### üéì (.+?)\n/);
        const itemsMatch = categoryMatch.match(/- \*\*(.+?)\*\* - (.+?)\n/g);
        
        if (nameMatch && itemsMatch) {
          const items = itemsMatch.map(item => {
            const itemParts = item.match(/- \*\*(.+?)\*\* - (.+?)\n/);
            return {
              name: itemParts ? itemParts[1] : '',
              distance: itemParts ? itemParts[2] : '',
              type: ''
            };
          });
          
          proximityCategories.push({
            category: nameMatch[1],
            items: items
          });
        }
      });
    }
  }
  
  // Extract regional impact
  const impactSection = content.match(/## Section D√©veloppement R√©gional([\s\S]*?)---/);
  const impactAspects = [];
  
  if (impactSection) {
    const aspectMatches = impactSection[1].match(/#### üèóÔ∏è (.+?)\n([\s\S]*?)(?=#### |$)/g);
    
    if (aspectMatches) {
      aspectMatches.forEach(aspectMatch => {
        const titleMatch = aspectMatch.match(/#### üèóÔ∏è (.+?)\n/);
        const descriptionMatch = aspectMatch.match(/- \*\*(.+?)\*\* (.+?)\n/g);
        
        if (titleMatch && descriptionMatch) {
          impactAspects.push({
            title: titleMatch[1],
            description: descriptionMatch.map(item => item.replace(/- \*\*(.+?)\*\* /, '')).join(' ')
          });
        }
      });
    }
  }
  
  // Extract testimonials
  const testimonialsSection = content.match(/## Section T√©moignages([\s\S]*?)---/);
  const testimonials = [];
  
  if (testimonialsSection) {
    const testimonialMatches = testimonialsSection[1].match(/#### (.+?) - (.+?)\n\*"(.+?)"\*/g);
    
    if (testimonialMatches) {
      testimonialMatches.forEach(testimonialMatch => {
        const parts = testimonialMatch.match(/#### (.+?) - (.+?)\n\*"(.+?)"\*/);
        
        if (parts) {
          testimonials.push({
            name: parts[1],
            profession: parts[2],
            comment: parts[3],
            apartment: 'Appartement EL BARAKAH'
          });
        }
      });
    }
  }
  
  return {
    title: data.title || 'EL BARAKAH - La B√©n√©diction √âternelle du Foyer',
    description: data.description || '',
    keywords: data.keywords ? data.keywords.split(', ') : [],
    author: data.author || 'Groupe Majaidri',
    date: data.date || new Date().toISOString(),
    lang: data.lang || 'fr',
    schema_markup: data.schema_markup || '',
    
    heroTitle: heroTitleMatch ? heroTitleMatch[1] : 'La B√©n√©diction √âternelle du Foyer',
    heroSubtitle: heroSubtitleMatch ? heroSubtitleMatch[1] : 'Un Sanctuaire Familial o√π R√©sonnent les Rires d\'Enfants et la S√©r√©nit√© des Anciens',
    heroDescription: heroDescriptionMatch ? 'EL BARAKAH transcende l\'habitat ' + heroDescriptionMatch[1] : 'EL BARAKAH transcende l\'habitat pour devenir un v√©ritable sanctuaire familial.',
    location: 'Guelmim - Porte du Sahara',
    
    overview: {
      title: 'EL BARAKAH : Modernit√© et Authenticit√© R√©gionale',
      description: 'EL BARAKAH incarne notre engagement envers le d√©veloppement √©quilibr√© du territoire marocain. Ce projet ambitieux offre des solutions de logement qualitatives et durables dans la r√©gion de Guelmim.',
      features: [
        {
          title: 'Localisation Strat√©gique',
          description: 'Guelmim, porte d\'entr√©e du Sahara, r√©gion en pleine expansion √©conomique.'
        },
        {
          title: 'Architecture Contemporaine',
          description: 'Design moderne adapt√© au climat saharien, mat√©riaux locaux et techniques innovantes.'
        },
        {
          title: 'Accessibilit√© Financi√®re',
          description: 'Prix attractifs √† partir de 250 000 Dhs, solutions de financement adapt√©es.'
        },
        {
          title: 'S√©curit√© & Tranquillit√©',
          description: 'R√©sidence 100% s√©curis√©e 24h/24, gardiennage professionnel permanent.'
        }
      ]
    },
    
    apartments: {
      title: 'Nos Foyers B√©nis : O√π Chaque Famille Trouve Son Sanctuaire',
      types: apartmentTypes.length > 0 ? apartmentTypes : [
        {
          name: 'Le Nid de l\'Amour',
          subtitle: 'Appartement 2 Pi√®ces Cocooning',
          surface: '60-70 m¬≤',
          rooms: 2,
          bathrooms: 1,
          price: '√Ä partir de 320 000 Dhs',
          description: 'Suite parentale avec coin lecture, salon-s√©jour ouvert sur loggia, cuisine familiale √©quip√©e (√©lectrom√©nager Bosch), salle de bain avec douche relaxante.',
          features: ['Loggia prot√©g√©e 12-15 m¬≤', 'Carrelage terre cuite', 'Climatisation √©cologique', 'Rangements optimis√©s'],
          idealFor: 'Jeunes couples, premiers foyers, investissement familial',
          image: 'https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80'
        },
        {
          name: 'Le Cocon des Rires',
          subtitle: 'Appartement 3 Pi√®ces Familial',
          surface: '80-90 m¬≤',
          rooms: 3,
          bathrooms: 2,
          price: '√Ä partir de 420 000 Dhs',
          description: '2 chambres enfants avec placards ludiques, salon-salle √† manger convivial, cuisine ouverte avec coin petit-d√©jeuner, 2 salles d\'eau (dont une adapt√©e enfants), cellier/rangement familial.',
          features: ['Terrasse familiale 18-22 m¬≤', 'Sols anti-d√©rapants', 'Prises s√©curis√©es enfants', '√âclairage doux'],
          idealFor: 'Familles avec 1-2 enfants, couples en projet d\'agrandissement',
          image: 'https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80'
        },
        {
          name: 'Le Palais des G√©n√©rations',
          subtitle: 'Appartement 4 Pi√®ces Prestige Familial',
          surface: '100-120 m¬≤',
          rooms: 4,
          bathrooms: 3,
          price: '√Ä partir de 520 000 Dhs',
          description: 'Suite parentale (20m¬≤) avec dressing et salle de bain privative, 2 chambres enfants/ados avec espaces personnalis√©s, double salon (r√©ception familiale + coin TV), cuisine familiale avec √Ælot central et coin repas, bureau/espace devoirs, WC invit√©s avec lave-mains.',
          features: ['Grande terrasse panoramique 25-30 m¬≤', 'Hauteur sous plafond 2.8m', 'Ventilation naturelle', 'Coin pri√®re discret'],
          idealFor: 'Grandes familles, familles multig√©n√©rationnelles, dirigeants locaux',
          image: 'https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80'
        }
      ]
    },
    
    amenities: {
      title: '√âquipements Modernes : Votre Confort au Quotidien',
      description: 'EL BARAKAH offre une gamme compl√®te d\'√©quipements et de services pens√©s pour le bien-√™tre de toute la famille.',
      categories: amenitiesCategories.length > 0 ? amenitiesCategories : [
        {
          name: 'Espaces de D√©tente',
          items: [
            {
              name: 'Piscine',
              description: 'Commune rafra√Æchissante'
            },
            {
              name: 'Bassin enfants',
              description: 'S√©curis√© et adapt√©'
            },
            {
              name: 'Espaces verts',
              description: 'Am√©nag√©s et entretenus'
            },
            {
              name: 'Aires de jeux',
              description: 'Pour enfants de tous √¢ges'
            }
          ]
        },
        {
          name: 'Services Communautaires',
          items: [
            {
              name: 'Salle polyvalente',
              description: 'Pour √©v√©nements familiaux'
            },
            {
              name: 'Espace de r√©union',
              description: 'Communautaire et convivial'
            },
            {
              name: 'Terrain de sport',
              description: 'Multidisciplinaire'
            },
            {
              name: 'Aire de barbecue',
              description: 'Collective et √©quip√©e'
            }
          ]
        },
        {
          name: 'Services Pratiques',
          items: [
            {
              name: 'Parking',
              description: 'S√©curis√© et couvert'
            },
            {
              name: 'Places visiteurs',
              description: 'D√©di√©es et accessibles'
            },
            {
              name: 'Local v√©los',
              description: 'Pratique et s√©curis√©'
            },
            {
              name: 'Gardiennage',
              description: '24h/24 professionnel'
            }
          ]
        }
      ]
    },
    
    location_details: {
      title: 'Un Cadre de Vie Privil√©gi√© √† Guelmim',
      description: 'EL BARAKAH b√©n√©ficie d\'un emplacement strat√©gique √† Guelmim, offrant un acc√®s facile √† tous les services essentiels.',
      proximities: proximityCategories.length > 0 ? proximityCategories : [
        {
          category: '√âducation',
          items: [
            {
              name: '√âcoles priv√©es',
              distance: '5 min',
              type: 'Enseignement de qualit√©'
            },
            {
              name: 'Coll√®ge public',
              distance: '8 min',
              type: 'Enseignement secondaire'
            },
            {
              name: 'Lyc√©e technique',
              distance: '10 min',
              type: 'Formation professionnelle'
            },
            {
              name: 'Centre de formation',
              distance: '12 min',
              type: 'Formation continue'
            }
          ]
        },
        {
          category: 'Sant√©',
          items: [
            {
              name: 'Centre de sant√©',
              distance: '3 min',
              type: 'Soins de base'
            },
            {
              name: 'Pharmacies',
              distance: '2 min',
              type: 'M√©dicaments et conseils'
            },
            {
              name: 'H√¥pital provincial',
              distance: '15 min',
              type: 'Soins complets'
            },
            {
              name: 'Cliniques priv√©es',
              distance: '10 min',
              type: 'Soins sp√©cialis√©s'
            }
          ]
        },
        {
          category: 'Services & Commerces',
          items: [
            {
              name: 'March√© municipal',
              distance: '8 min',
              type: 'Produits frais'
            },
            {
              name: 'Centre commercial',
              distance: '12 min',
              type: 'Shopping vari√©'
            },
            {
              name: 'Banques',
              distance: '5 min',
              type: 'Services financiers'
            },
            {
              name: 'Administration',
              distance: '10 min',
              type: 'Services publics'
            }
          ]
        }
      ]
    },
    
    regional_impact: {
      title: 'EL BARAKAH : Moteur du D√©veloppement du Sud',
      description: 'Notre projet EL BARAKAH contribue activement au d√©veloppement √©conomique et social de la r√©gion de Guelmim.',
      aspects: impactAspects.length > 0 ? impactAspects : [
        {
          title: 'Contribution √âconomique',
          description: 'Cr√©ation d\'emplois locaux, dynamisation du secteur BTP, attraction d\'investissements, d√©veloppement de l\'√©cosyst√®me local.'
        },
        {
          title: 'D√©veloppement Durable',
          description: 'Mat√©riaux locaux privil√©gi√©s, techniques respectueuses de l\'environnement, gestion optimis√©e des ressources, int√©gration paysag√®re harmonieuse.'
        },
        {
          title: 'Impact Social',
          description: 'Logements accessibles aux familles, am√©lioration du cadre de vie, renforcement du tissu social, services de proximit√© int√©gr√©s.'
        },
        {
          title: 'Perspectives d\'Avenir',
          description: 'Valorisation du patrimoine immobilier, attractivit√© renforc√©e de la r√©gion, d√©veloppement touristique potentiel, rayonnement √©conomique √©largi.'
        }
      ]
    },
    
    testimonials: {
      title: 'Ils Ont Choisi EL BARAKAH',
      items: testimonials.length > 0 ? testimonials : [
        {
          name: 'Famille Alaoui',
          profession: 'Propri√©taires',
          comment: 'EL BARAKAH nous a offert la possibilit√© d\'acqu√©rir notre premier logement dans d\'excellentes conditions. La qualit√© de construction et l\'environnement s√©curis√© nous ont convaincus.',
          apartment: 'Appartement F3'
        },
        {
          name: 'M. Hassan',
          profession: 'Investisseur',
          comment: 'Un excellent investissement dans une r√©gion d\'avenir. La rentabilit√© locative est au rendez-vous et la gestion est facilit√©e par la qualit√© du projet.',
          apartment: 'Plusieurs unit√©s'
        },
        {
          name: 'Mme Fatima',
          profession: 'Retrait√©e',
          comment: 'Apr√®s avoir v√©cu √† Casablanca, j\'ai choisi EL BARAKAH pour la tranquillit√© et la proximit√© des services. Je ne regrette pas mon choix.',
          apartment: 'Appartement F2'
        }
      ]
    },
    
    contact: {
      title: 'D√©couvrez EL BARAKAH : Votre Nouveau Chez-Vous',
      description: 'Notre √©quipe EL BARAKAH vous accompagne dans la d√©couverte de votre futur logement √† Guelmim.',
      info: {
        phone: '+212 XXX XXX XXX',
        email: 'elbarakah@groupemajaidri.ma',
        address: 'Avenue Mohammed V, Guelmim',
        hours: 'Lun-Sam 9h-18h'
      }
    }
  };
}

// Parse Citta Verde content
export function parseCittaVerdeContent(): CittaVerdeContent {
  const filePath = path.join(process.cwd(), '05-projet-citta-verde.md');
  const fileContents = fs.readFileSync(filePath, 'utf8');
  const { data, content } = matter(fileContents);
  
  // Extract hero section
  const heroTitleMatch = content.match(/# CITT√Ä VERDE - (.+)/);
  const heroSubtitleMatch = content.match(/\*"(.+?)"\*/);
  const heroDescriptionMatch = content.match(/CITT√Ä VERDE transcende l'habitat (.+?)\n\n/);
  
  // Extract plots
  const plotsSection = content.match(/## Collection de Parcelles √âco-Luxueuses([\s\S]*?)---/);
  const plotTypes = [];
  
  if (plotsSection) {
    const plotMatches = plotsSection[1].match(/#### \*\*"(.+?)"\*\* - (.+?)\n([\s\S]*?)(?=#### |$)/g);
    
    if (plotMatches) {
      plotMatches.forEach(plotMatch => {
        const nameMatch = plotMatch.match(/#### \*\*"(.+?)"\*\* - (.+?)\n/);
        const surfaceMatch = plotMatch.match(/- \*\*Surface (.+?)\*\* : (.+?) d'art de vivre/);
        const elevationMatch = plotMatch.match(/- \*\*√âl√©vation (.+?)\*\* : (.+?)\n/);
        const featuresMatch = plotMatch.match(/- \*\*Signature CITT√Ä VERDE\*\* :\s+([\s\S]*?)- \*\*Investissement/);
        const priceMatch = plotMatch.match(/- \*\*Investissement Vert\*\* : √Ä partir de (.+?) Dhs/);
        
        if (nameMatch) {
          const features = [];
          if (featuresMatch) {
            const featureLines = featuresMatch[1].match(/- (.+?)\n/g);
            if (featureLines) {
              featureLines.forEach(line => {
                features.push(line.replace(/- /, '').trim());
              });
            }
          }
          
          plotTypes.push({
            name: nameMatch[1],
            subtitle: nameMatch[2],
            surface: surfaceMatch ? surfaceMatch[2] : '200-800m¬≤',
            elevation: elevationMatch ? elevationMatch[2] : 'R+2',
            price: priceMatch ? priceMatch[1] : '√Ä partir de 180 000 Dhs',
            description: 'Terrain √©co-responsable avec orientation solaire optimis√©e et vue inspirante sur les espaces verts m√©diterran√©ens ou le panorama golf.',
            features: features.length > 0 ? features : [
              'Pr√©-√©quipement solaire inclus',
              'Syst√®me de r√©cup√©ration d\'eau int√©gr√©',
              'Borne de recharge √©lectrique',
              'Jardin m√©diterran√©en pr√©-plant√©'
            ],
            idealFor: 'Familles √©co-conscientes, investisseurs visionnaires',
            image: 'https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80'
          });
        }
      });
    }
  }
  
  // Extract sustainability features
  const sustainabilitySection = content.match(/## Section D√©veloppement Durable([\s\S]*?)---/);
  const sustainabilityFeatures = [];
  
  if (sustainabilitySection) {
    const featureMatches = sustainabilitySection[1].match(/#### üå± (.+?)\n([\s\S]*?)(?=#### |$)/g);
    
    if (featureMatches) {
      featureMatches.forEach(featureMatch => {
        const titleMatch = featureMatch.match(/#### üå± (.+?)\n/);
        const descriptionMatch = featureMatch.match(/- \*\*(.+?)\*\* (.+?)\n/g);
        
        if (titleMatch && descriptionMatch) {
          sustainabilityFeatures.push({
            title: titleMatch[1],
            description: descriptionMatch.map(item => item.replace(/- \*\*(.+?)\*\* /, '')).join(' ')
          });
        }
      });
    }
  }
  
  // Extract infrastructure
  const infrastructureSection = content.match(/## Section Am√©nagements & Infrastructure([\s\S]*?)---/);
  const infrastructureCategories = [];
  
  if (infrastructureSection) {
    const categoryMatches = infrastructureSection[1].match(/#### üõ£Ô∏è (.+?)\n([\s\S]*?)(?=#### |$)/g);
    
    if (categoryMatches) {
      categoryMatches.forEach(categoryMatch => {
        const nameMatch = categoryMatch.match(/#### üõ£Ô∏è (.+?)\n/);
        const itemsMatch = categoryMatch.match(/- \*\*(.+?)\*\* (.+?)\n/g);
        
        if (nameMatch && itemsMatch) {
          const items = itemsMatch.map(item => {
            const itemParts = item.match(/- \*\*(.+?)\*\* (.+?)\n/);
            return itemParts ? itemParts[1] + ' ' + itemParts[2] : '';
          });
          
          infrastructureCategories.push({
            name: nameMatch[1],
            items: items
          });
        }
      });
    }
  }
  
  // Extract location details
  const locationSection = content.match(/## Section Environnement & Proximit√©s([\s\S]*?)---/);
  const proximityCategories = [];
  
  if (locationSection) {
    const categoryMatches = locationSection[1].match(/#### ‚õ≥ (.+?)\n([\s\S]*?)(?=#### |$)/g);
    
    if (categoryMatches) {
      categoryMatches.forEach(categoryMatch => {
        const nameMatch = categoryMatch.match(/#### ‚õ≥ (.+?)\n/);
        const itemsMatch = categoryMatch.match(/- \*\*(.+?)\*\* - (.+?)\n/g);
        
        if (nameMatch && itemsMatch) {
          const items = itemsMatch.map(item => {
            const itemParts = item.match(/- \*\*(.+?)\*\* - (.+?)\n/);
            return {
              name: itemParts ? itemParts[1] : '',
              distance: itemParts ? itemParts[2] : '',
              type: ''
            };
          });
          
          proximityCategories.push({
            category: nameMatch[1],
            items: items
          });
        }
      });
    }
  }
  
  // Extract testimonials
  const testimonialsSection = content.match(/## Section T√©moignages([\s\S]*?)---/);
  const testimonials = [];
  
  if (testimonialsSection) {
    const testimonialMatches = testimonialsSection[1].match(/#### (.+?) - (.+?)\n\*"(.+?)"\*/g);
    
    if (testimonialMatches) {
      testimonialMatches.forEach(testimonialMatch => {
        const parts = testimonialMatch.match(/#### (.+?) - (.+?)\n\*"(.+?)"\*/);
        
        if (parts) {
          testimonials.push({
            name: parts[1],
            profession: parts[2],
            comment: parts[3],
            plotType: 'Terrain CITT√Ä VERDE'
          });
        }
      });
    }
  }
  
  return {
    title: data.title || 'CITT√Ä VERDE - L\'√âden Contemporain de Demain',
    description: data.description || '',
    keywords: data.keywords ? data.keywords.split(', ') : [],
    author: data.author || 'Groupe Majaidri',
    date: data.date || new Date().toISOString(),
    lang: data.lang || 'fr',
    schema_markup: data.schema_markup || '',
    
    heroTitle: heroTitleMatch ? heroTitleMatch[1] : 'L\'√âden Contemporain de Demain',
    heroSubtitle: heroSubtitleMatch ? heroSubtitleMatch[1] : 'Une Symphonie √âcologique en Terre Marocaine, Inspir√©e par la Dolce Vita',
    heroDescription: heroDescriptionMatch ? 'CITT√Ä VERDE transcende l\'habitat ' + heroDescriptionMatch[1] : 'CITT√Ä VERDE transcende l\'habitat pour devenir un manifeste vivant de l\'√©co-luxe.',
    location: 'Benslimane - √Ä 3 minutes du Golf de Benslimane',
    
    overview: {
      title: 'CITT√Ä VERDE : Votre Futur Commence Ici',
      description: 'CITT√Ä VERDE repr√©sente l\'aboutissement de notre vision du d√©veloppement durable et de l\'urbanisme moderne. Ce lotissement visionnaire offre une flexibilit√© exceptionnelle pour b√¢tir votre avenir.',
      features: [
        {
          title: 'D√©veloppement Durable',
          description: 'Ville verte respectueuse de l\'environnement, espaces verts pr√©serv√©s, gestion √©cologique des eaux pluviales.'
        },
        {
          title: 'Flexibilit√© Architecturale',
          description: 'Terrains R+2 et R+3 adaptables, villas, immeubles ou commerces autoris√©s, grande libert√© architecturale.'
        },
        {
          title: 'Localisation Privil√©gi√©e',
          description: '3 minutes du Golf de Benslimane, proximit√© Casablanca-Rabat, acc√®s autoroutier facilit√©.'
        },
        {
          title: 'Infrastructure Compl√®te',
          description: 'Terrains viabilis√©s pr√™ts √† construire, voirie et √©clairage public int√©gr√©s, r√©seaux complets.'
        }
      ]
    },
    
    plots: {
      title: 'Nos Terrains : Construisez Votre Vision √âcologique',
      types: plotTypes.length > 0 ? plotTypes : [
        {
          name: 'L\'√âden Intime',
          subtitle: 'Terrain √âco-R√©sidentiel d\'Exception',
          surface: '110 √† 150 m¬≤',
          elevation: 'Rez + 2 √©tages',
          price: '√Ä partir de 180 000 Dhs',
          description: 'Terrain √©co-responsable avec orientation solaire optimis√©e et vue inspirante sur les espaces verts m√©diterran√©ens.',
          features: [
            'Pr√©-√©quipement solaire inclus',
            'Syst√®me de r√©cup√©ration d\'eau int√©gr√©',
            'Borne de recharge √©lectrique',
            'Jardin m√©diterran√©en pr√©-plant√©'
          ],
          idealFor: 'Jeunes familles √©co-conscientes, investisseurs visionnaires',
          image: 'https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80'
        },
        {
          name: 'Le Sanctuaire Familial',
          subtitle: 'Terrain √âco-Prestige R√©sidentiel',
          surface: '200 √† 300 m¬≤',
          elevation: 'Rez + 2 √©tages',
          price: '√Ä partir de 280 000 Dhs',
          description: 'Parcelle g√©n√©reuse id√©ale pour une villa de standing avec √©cosyst√®me jardin, piscine naturelle et jardin permaculture possibles.',
          features: [
            'Installation domotique pr√©-c√¢bl√©e',
            'Syst√®me d\'irrigation intelligent',
            'Espace wellness ext√©rieur',
            'Garage √©co-con√ßu'
          ],
          idealFor: 'Familles √©tablies cherchant l\'√©quilibre parfait entre luxe et √©cologie',
          image: 'https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80'
        },
        {
          name: 'L\'Innovation Verticale',
          subtitle: 'Terrain √âco-R√©sidentiel R+3',
          surface: '150 √† 250 m¬≤',
          elevation: 'Rez + 3 √©tages',
          price: '√Ä partir de 220 000 Dhs',
          description: 'Terrain optimis√© pour l\'innovation verticale, id√©al pour un immeuble r√©sidentiel vert ou une villa contemporaine √† √©tages.',
          features: [
            'Micro-√©olienne urbaine incluse',
            'Fa√ßade v√©g√©tale pr√©par√©e',
            'Ascenseur √©cologique',
            'Terrasses jardins √©tag√©es'
          ],
          idealFor: 'Investisseurs innovants, promoteurs √©co-responsables',
          image: 'https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80'
        }
      ]
    },
    
    sustainability: {
      title: 'CITT√Ä VERDE : Pionnier de l\'√âco-Urbanisme',
      description: 'Notre projet CITT√Ä VERDE int√®gre les derni√®res innovations en mati√®re de d√©veloppement durable et d\'√©co-construction.',
      features: sustainabilityFeatures.length > 0 ? sustainabilityFeatures : [
        {
          title: 'Gestion Environnementale',
          description: 'Pr√©servation de la biodiversit√© locale, gestion durable des eaux pluviales, tri s√©lectif et recyclage int√©gr√©s.'
        },
        {
          title: '√ânergies Renouvelables',
          description: '√âclairage public solaire, bornes de recharge √©lectrique, pr√©paration pour panneaux solaires, smart grid en d√©veloppement.'
        },
        {
          title: 'Gestion de l\'Eau',
          description: 'R√©cup√©ration des eaux pluviales, arrosage automatique √©conomique, bassins de r√©tention paysagers, plantes r√©sistantes √† la s√©cheresse.'
        },
        {
          title: 'Construction Durable',
          description: 'Mat√©riaux locaux privil√©gi√©s, normes environnementales strictes, isolation thermique optimis√©e, ventilation naturelle encourag√©e.'
        }
      ]
    },
    
    infrastructure: {
      title: 'Infrastructure Moderne : Tout Pens√© pour Votre Confort',
      description: 'CITT√Ä VERDE offre une infrastructure compl√®te et moderne pour garantir votre confort au quotidien.',
      categories: infrastructureCategories.length > 0 ? infrastructureCategories : [
        {
          name: 'Voirie & Circulation',
          items: [
            'Routes bitum√©es de qualit√©',
            'Trottoirs pi√©tons s√©curis√©s',
            '√âclairage public LED √©conomique',
            'Signalisation moderne et claire',
            'Parkings visiteurs am√©nag√©s'
          ]
        },
        {
          name: 'R√©seaux & Utilities',
          items: [
            '√âlectricit√© haute et basse tension',
            'Eau potable r√©seau ONEE',
            'Assainissement collectif moderne',
            'T√©l√©communications fibre optique',
            'Gaz naturel (en pr√©paration)'
          ]
        },
        {
          name: 'Espaces Verts & Loisirs',
          items: [
            'Parc central de 2 hectares',
            'Aires de jeux pour enfants',
            'Parcours de jogging am√©nag√©',
            'Espaces de d√©tente ombrag√©s',
            'Jardins th√©matiques entretenus'
          ]
        },
        {
          name: 'Services & Commerces',
          items: [
            'Centre commercial int√©gr√©',
            'Mosqu√©e communautaire',
            '√âcole maternelle priv√©e',
            'Pharmacie et services m√©dicaux',
            'Caf√©/Restaurant de quartier'
          ]
        }
      ]
    },
    
    location_details: {
      title: 'Un Cadre de Vie Exceptionnel',
      description: 'CITT√Ä VERDE b√©n√©ficie d\'un emplacement privil√©gi√© √† Benslimane, offrant un cadre de vie exceptionnel entre nature et proximit√© des centres urbains.',
      proximities: proximityCategories.length > 0 ? proximityCategories : [
        {
          category: 'Loisirs & Sport',
          items: [
            {
              name: 'Golf de Benslimane',
              distance: '3 min',
              type: 'Golf 18 trous'
            },
            {
              name: 'Club √©questre',
              distance: '8 min',
              type: '√âquitation'
            },
            {
              name: 'Complexe sportif',
              distance: '10 min',
              type: 'Sports vari√©s'
            },
            {
              name: 'Espaces naturels',
              distance: 'Acc√®s direct',
              type: 'Randonn√©e et nature'
            }
          ]
        },
        {
          category: '√âducation',
          items: [
            {
              name: '√âcole internationale',
              distance: '12 min',
              type: 'Primaire et secondaire'
            },
            {
              name: 'Coll√®ge public',
              distance: '8 min',
              type: 'Enseignement public'
            },
            {
              name: 'Lyc√©e technique',
              distance: '15 min',
              type: 'Formation technique'
            },
            {
              name: 'Universit√©',
              distance: '25 min (Casablanca)',
              type: 'Enseignement sup√©rieur'
            }
          ]
        },
        {
          category: 'Transports',
          items: [
            {
              name: 'Autoroute A3',
              distance: '5 min',
              type: 'R√©seau autoroutier'
            },
            {
              name: 'Casablanca',
              distance: '45 min',
              type: 'M√©tropole √©conomique'
            },
            {
              name: 'Rabat',
              distance: '35 min',
              type: 'Capitale administrative'
            },
            {
              name: 'A√©roport Mohammed V',
              distance: '40 min',
              type: 'Vols nationaux et internationaux'
            }
          ]
        }
      ]
    },
    
    testimonials: {
      title: 'Ils Ont Choisi CITT√Ä VERDE',
      items: testimonials.length > 0 ? testimonials : [
        {
          name: 'Famille Bennani',
          profession: 'Propri√©taires',
          comment: 'CITT√Ä VERDE nous a s√©duits par son concept de ville verte. Nous avons construit notre villa de r√™ve dans un environnement exceptionnel, proche de tout mais au calme.',
          plotType: 'Villa R+2'
        },
        {
          name: 'M. Alami',
          profession: 'Investisseur',
          comment: 'Un excellent investissement ! La proximit√© du golf et de Casablanca, combin√©e √† la qualit√© du lotissement, garantit une valorisation certaine.',
          plotType: 'Terrain d\'investissement'
        },
        {
          name: 'Mme Chraibi',
          profession: 'R√©sidente',
          comment: 'Notre maison de campagne √† CITT√Ä VERDE est devenue notre refuge. Le cadre verdoyant et la tranquillit√© sont incomparables.',
          plotType: 'R√©sidence secondaire'
        }
      ]
    },
    
    contact: {
      title: 'D√©couvrez CITT√Ä VERDE : Votre Oasis de Verdure',
      description: 'Notre √©quipe CITT√Ä VERDE vous accompagne dans la d√©couverte de votre futur terrain √† Benslimane.',
      info: {
        phone: '+212 XXX XXX XXX',
        email: 'cittaverde@groupemajaidri.ma',
        address: 'CITT√Ä VERDE, Route du Golf, Benslimane',
        hours: '7j/7 de 9h00 - 19h00'
      }
    }
  };
}

// Parse Nos Projets content
export function parseNosProjetsContent(): NosProjetsContent {
  const filePath = path.join(process.cwd(), '06-nos-projets.md');
  const fileContents = fs.readFileSync(filePath, 'utf8');
  const { data, content } = matter(fileContents);
  
  // Extract hero section
  const heroTitleMatch = content.match(/# NOS PROJETS - GROUPE MAJAIDRI/);
  const heroSubtitleMatch = content.match(/### Sous-titre\s+(.+)/);
  const heroDescriptionMatch = content.match(/### Description Hero\s+([\s\S]*?)###/);
  
  // Extract projects
  const solunaSection = content.match(/## Section SOLUNA Casablanca([\s\S]*?)---/);
  const elBarakahSection = content.match(/## Section EL BARAKAH Guelmim([\s\S]*?)---/);
  const cittaVerdeSection = content.match(/## Section CITT√Ä VERDE Benslimane([\s\S]*?)---/);
  
  // Extract comparison table
  const comparisonSection = content.match(/## Section Comparatif Projets([\s\S]*?)---/);
  let comparisonTable = {
    headers: ['Crit√®re', 'SOLUNA', 'EL BARAKAH', 'CITT√Ä VERDE'],
    rows: []
  };
  
  if (comparisonSection) {
    const tableMatch = comparisonSection[1].match(/\| (.+?) \| (.+?) \| (.+?) \| (.+?) \|/g);
    
    if (tableMatch) {
      // Skip the header and separator rows
      for (let i = 2; i < tableMatch.length; i++) {
        const rowMatch = tableMatch[i].match(/\| (.+?) \| (.+?) \| (.+?) \| (.+?) \|/);
        
        if (rowMatch) {
          comparisonTable.rows.push({
            criteria: rowMatch[1],
            soluna: rowMatch[2],
            elBarakah: rowMatch[3],
            cittaVerde: rowMatch[4]
          });
        }
      }
    }
  }
  
  // Extract guide
  const guideSection = content.match(/### Guide de Choix([\s\S]*?)---/);
  let guide = {
    soluna: [],
    elBarakah: [],
    cittaVerde: []
  };
  
  if (guideSection) {
    const solunaGuideMatch = guideSection[1].match(/#### Choisissez SOLUNA si :([\s\S]*?)####/);
    const elBarakahGuideMatch = guideSection[1].match(/#### Choisissez EL BARAKAH si :([\s\S]*?)####/);
    const cittaVerdeGuideMatch = guideSection[1].match(/#### Choisissez CITT√Ä VERDE si :([\s\S]*?)---/);
    
    if (solunaGuideMatch) {
      const items = solunaGuideMatch[1].match(/- Vous (.+?)\n/g);
      if (items) {
        guide.soluna = items.map(item => 'Vous ' + item.replace(/- Vous /, '').trim());
      }
    }
    
    if (elBarakahGuideMatch) {
      const items = elBarakahGuideMatch[1].match(/- Vous (.+?)\n/g);
      if (items) {
        guide.elBarakah = items.map(item => 'Vous ' + item.replace(/- Vous /, '').trim());
      }
    }
    
    if (cittaVerdeGuideMatch) {
      const items = cittaVerdeGuideMatch[1].match(/- Vous (.+?)\n/g);
      if (items) {
        guide.cittaVerde = items.map(item => 'Vous ' + item.replace(/- Vous /, '').trim());
      }
    }
  }
  
  // Extract process
  const processSection = content.match(/## Section Processus d'Achat([\s\S]*?)---/);
  const processSteps = [];
  
  if (processSection) {
    const stepMatches = processSection[1].match(/#### \d\. (.+?)\n([\s\S]*?)(?=#### \d\. |$)/g);
    
    if (stepMatches) {
      stepMatches.forEach(stepMatch => {
        const titleMatch = stepMatch.match(/#### \d\. (.+?)\n/);
        const descriptionMatch = stepMatch.match(/- \*\*(.+?)\*\* (.+?)\n/g);
        
        if (titleMatch && descriptionMatch) {
          processSteps.push({
            title: titleMatch[1],
            description: descriptionMatch.map(item => item.replace(/- \*\*(.+?)\*\* /, '')).join(' ')
          });
        }
      });
    }
  }
  
  return {
    title: data.title || 'Nos Projets | Trois Univers d\'Exception',
    description: data.description || '',
    keywords: data.keywords ? data.keywords.split(', ') : [],
    author: data.author || 'Groupe Majaidri',
    date: data.date || new Date().toISOString(),
    lang: data.lang || 'fr',
    schema_markup: data.schema_markup || '',
    
    heroTitle: 'Nos Projets : L\'Excellence Immobili√®re Sign√©e Groupe Majaidri',
    heroSubtitle: heroSubtitleMatch ? heroSubtitleMatch[1] : 'Trois Destinations d\'Exception pour Votre Avenir',
    heroDescription: heroDescriptionMatch ? heroDescriptionMatch[1].trim() : 'D√©couvrez notre portfolio de projets immobiliers d\'exception, chacun con√ßu pour r√©pondre √† des aspirations uniques.',
    
    projects: {
      soluna: {
        title: 'SOLUNA CASABLANCA',
        subtitle: 'R√©sidence de Prestige au C≈ìur de la M√©tropole',
        location: 'Casablanca',
        type: 'R√©sidences de Prestige',
        description: 'SOLUNA incarne l\'art de vivre urbain dans sa forme la plus raffin√©e. Cette r√©sidence d\'exception offre des appartements haut de gamme alliant design contemporain, finitions luxueuses et services exclusifs.',
        features: [
          'Mat√©riaux nobles import√©s d\'Italie',
          'Domotique int√©gr√©e derni√®re g√©n√©ration',
          'Espaces wellness privatifs',
          'Conciergerie 24h/7j'
        ],
        priceRange: '850K - 3.5M Dhs'
      },
      elBarakah: {
        title: 'EL BARAKAH GUELMIM',
        subtitle: 'D√©veloppement R√©gional et Habitat Moderne',
        location: 'Guelmim',
        type: 'R√©sidences Familiales',
        description: 'EL BARAKAH repr√©sente notre engagement envers le d√©veloppement des r√©gions du Sud. Ce projet ambitieux offre des logements modernes et accessibles, contribuant au dynamisme √©conomique et social de Guelmim.',
        features: [
          'Aires de jeux premium s√©curis√©es',
          'Espaces verts th√©matiques',
          'Club house familial',
          'Services de garde d\'enfants'
        ],
        priceRange: '320K - 680K Dhs'
      },
      cittaVerde: {
        title: 'CITT√Ä VERDE BENSLIMANE',
        subtitle: 'Lotissement √âcologique de Luxe',
        location: 'Benslimane',
        type: 'Lotissement √âcologique',
        description: 'CITT√Ä VERDE incarne notre vision de l\'urbanisme durable et responsable. Ce lotissement √©cologique d\'exception offre des terrains constructibles dans un cadre verdoyant, alliant respect de l\'environnement et qualit√© de vie.',
        features: [
          'Panneaux solaires int√©gr√©s',
          'Syst√®me de r√©cup√©ration d\'eau',
          'Jardins bioclimatiques',
          'Mobilit√© √©lectrique'
        ],
        priceRange: '180K - 450K Dhs'
      }
    },
    
    comparison: {
      title: 'Trouvez le Projet qui Vous Correspond',
      description: 'Comparez nos trois projets phares pour trouver celui qui correspond le mieux √† vos besoins et aspirations.',
      table: comparisonTable,
      guide: guide
    },
    
    process: {
      title: 'Votre Parcours d\'Acquisition Simplifi√©',
      description: 'Chez Groupe Majaidri, nous avons simplifi√© le processus d\'acquisition pour vous offrir une exp√©rience fluide et transparente.',
      steps: processSteps.length > 0 ? processSteps : [
        {
          title: 'D√©couverte & Conseil',
          description: 'Visite des projets qui vous int√©ressent, conseil personnalis√© selon vos besoins, pr√©sentation des options disponibles, simulation financi√®re gratuite.'
        },
        {
          title: 'R√©servation',
          description: 'Choix de votre bien ou terrain, signature du contrat de r√©servation, versement de l\'acompte (10-30%), blocage du prix et des conditions.'
        },
        {
          title: 'Financement',
          description: 'Accompagnement dans les d√©marches, partenariats bancaires privil√©gi√©s, n√©gociation des meilleures conditions, validation du dossier de cr√©dit.'
        },
        {
          title: 'Signature & Suivi',
          description: 'Signature de l\'acte de vente, suivi r√©gulier de l\'avancement, communication transparente, livraison dans les d√©lais.'
        }
      ]
    }
  };
}

// Parse Actualites content
export function parseActualitesContent(): ActualitesContent {
  const filePath = path.join(process.cwd(), '07-actualites.md');
  const fileContents = fs.readFileSync(filePath, 'utf8');
  const { data, content } = matter(fileContents);
  
  // Extract hero section
  const heroTitleMatch = content.match(/# ACTUALIT√âS & √âV√âNEMENTS - GROUPE MAJAIDRI/);
  const heroSubtitleMatch = content.match(/### Sous-titre\s+(.+)/);
  const heroDescriptionMatch = content.match(/### Description Hero\s+([\s\S]*?)###/);
  
  // Extract articles
  const articlesSection = content.match(/## Section Actualit√©s R√©centes([\s\S]*?)---/);
  const articles = [];
  
  if (articlesSection) {
    const articleMatches = articlesSection[1].match(/### Article \d+ : (.+?)\n\n([\s\S]*?)(?=### Article \d+ :|---)/g);
    
    if (articleMatches) {
      articleMatches.forEach(articleMatch => {
        const titleMatch = articleMatch.match(/### Article \d+ : (.+?)\n/);
        const dateMatch = articleMatch.match(/#### Date\s+(.+?)\n/);
        const categoryMatch = articleMatch.match(/#### Cat√©gorie\s+(.+?)\n/);
        const excerptMatch = articleMatch.match(/#### R√©sum√©\s+(.+?)\n/);
        const contentMatch = articleMatch.match(/#### Contenu D√©taill√©\s+([\s\S]*?)(?=#### |$)/);
        const imageMatch = articleMatch.match(/#### Images\s+([\s\S]*?)(?=---)/);
        
        if (titleMatch) {
          const slug = titleMatch[1].toLowerCase().replace(/\s+/g, '-').replace(/[^\w-]+/g, '');
          
          articles.push({
            title: titleMatch[1],
            date: dateMatch ? dateMatch[1] : 'Janvier 2024',
            category: categoryMatch ? categoryMatch[1] : 'Actualit√©s',
            excerpt: excerptMatch ? excerptMatch[1] : '',
            content: contentMatch ? contentMatch[1] : '',
            image: 'https://images.unsplash.com/photo-1560472354-b33ff0c44a43?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80',
            slug: slug,
            featured: articles.length === 0 // First article is featured
          });
        }
      });
    }
  }
  
  // Extract events
  const eventsSection = content.match(/## Section √âv√©nements √† Venir([\s\S]*?)---/);
  const events = [];
  
  if (eventsSection) {
    const eventMatches = eventsSection[1].match(/### √âv√©nement \d+ : (.+?)\n\n([\s\S]*?)(?=### √âv√©nement \d+ :|---)/g);
    
    if (eventMatches) {
      eventMatches.forEach(eventMatch => {
        const titleMatch = eventMatch.match(/### √âv√©nement \d+ : (.+?)\n/);
        const dateMatch = eventMatch.match(/#### Date\s+(.+?)\n/);
        const locationMatch = eventMatch.match(/#### Lieu\s+(.+?)\n/);
        const descriptionMatch = eventMatch.match(/#### Description\s+(.+?)\n/);
        const typeMatch = eventMatch.match(/#### Type\s+(.+?)\n/);
        
        if (titleMatch) {
          events.push({
            title: titleMatch[1],
            date: dateMatch ? dateMatch[1] : 'D√©cembre 2024',
            location: locationMatch ? locationMatch[1] : 'Casablanca',
            description: descriptionMatch ? descriptionMatch[1] : '',
            type: typeMatch ? typeMatch[1] : '√âv√©nement'
          });
        }
      });
    }
  }
  
  // Extract press
  const pressSection = content.match(/## Section Revue de Presse([\s\S]*?)---/);
  const press = [];
  
  if (pressSection) {
    const pressMatches = pressSection[1].match(/#### (.+?) - (.+?)\n\n\*\*"(.+?)"\*\*/g);
    
    if (pressMatches) {
      pressMatches.forEach(pressMatch => {
        const parts = pressMatch.match(/#### (.+?) - (.+?)\n\n\*\*"(.+?)"\*\*/);
        
        if (parts) {
          press.push({
            title: parts[3],
            source: parts[1],
            date: parts[2],
            excerpt: 'Article de fond sur notre strat√©gie de d√©veloppement durable et l\'impact de nos projets sur l\'urbanisme marocain.',
            link: '#'
          });
        }
      });
    }
  }
  
  return {
    title: data.title || 'Actualit√©s & √âv√©nements | News Immobilier Maroc | SOLUNA EL BARAKAH CITT√Ä VERDE',
    description: data.description || '',
    keywords: data.keywords ? data.keywords.split(', ') : [],
    author: data.author || 'Groupe Majaidri',
    date: data.date || new Date().toISOString(),
    lang: data.lang || 'fr',
    schema_markup: data.schema_markup || '',
    
    heroTitle: 'Actualit√©s & √âv√©nements : Le Dynamisme de Groupe Majaidri',
    heroSubtitle: heroSubtitleMatch ? heroSubtitleMatch[1] : 'Suivez Notre Actualit√© et Nos √âv√©nements',
    heroDescription: heroDescriptionMatch ? heroDescriptionMatch[1].trim() : 'Restez inform√©s de toutes les actualit√©s du Groupe Majaidri : lancements de projets, √©v√©nements immobiliers, innovations, partenariats et moments forts de notre d√©veloppement.',
    
    articles: articles.length > 0 ? articles : [
      {
        title: 'Groupe Majaidri Remporte le Prix Excellence Immobili√®re 2024',
        date: '15 janvier 2024',
        category: 'R√©compenses',
        excerpt: 'Reconnaissance de notre engagement pour l\'innovation architecturale et le d√©veloppement durable. Une fiert√© qui nous pousse vers de nouveaux sommets d\'excellence.',
        content: 'Du 12 au 15 novembre 2024, le Groupe Majaidri a particip√© avec succ√®s au Salon de l\'Immobilier de Luxe organis√© √† l\'Office des Changes de Casablanca. Notre stand, con√ßu pour refl√©ter l\'√©l√©gance et l\'innovation de nos projets, a attir√© plus de 500 visiteurs sur les quatre jours de l\'√©v√©nement.',
        image: 'https://images.unsplash.com/photo-1560472354-b33ff0c44a43?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80',
        slug: 'prix-excellence-immobiliere-2024',
        featured: true
      },
      {
        title: 'CITT√Ä VERDE : Premier Lotissement Z√©ro Carbone du Maroc',
        date: '8 janvier 2024',
        category: 'Innovation',
        excerpt: 'Une r√©volution √©cologique qui positionne le Maroc √† l\'avant-garde de l\'habitat durable. L\'avenir commence √† Benslimane.',
        content: 'Le 8 novembre 2024, en pr√©sence des autorit√©s locales, des partenaires et des premiers acqu√©reurs, le Groupe Majaidri a officiellement lanc√© la Phase II de CITT√Ä VERDE Benslimane. Cette √©tape marque une nouvelle avanc√©e dans notre vision de l\'urbanisme durable.',
        image: 'https://images.unsplash.com/photo-1518780664697-55e3ad937233?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80',
        slug: 'citta-verde-lotissement-zero-carbone',
        featured: false
      },
      {
        title: 'Lancement de la Phase 2 d\'EL BARAKAH',
        date: '22 d√©cembre 2023',
        category: 'Projets',
        excerpt: '100 nouvelles r√©sidences familiales qui enrichissent notre vision de l\'art de vivre multig√©n√©rationnel.',
        content: 'Suite au succ√®s de la premi√®re phase, nous sommes fiers d\'annoncer le lancement de la Phase 2 d\'EL BARAKAH √† Guelmim. Cette nouvelle √©tape comprend 100 r√©sidences familiales suppl√©mentaires, con√ßues pour offrir un cadre de vie optimal aux familles de la r√©gion.',
        image: 'https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80',
        slug: 'lancement-phase-2-el-barakah',
        featured: false
      }
    ],
    
    events: events.length > 0 ? events : [
      {
        title: 'Journ√©es Portes Ouvertes SOLUNA',
        date: '7-8 D√©cembre 2024',
        location: 'Appartement T√©moin SOLUNA, Casablanca',
        description: 'D√©couvrez en exclusivit√© les appartements t√©moins de SOLUNA, enti√®rement meubl√©s et d√©cor√©s par nos partenaires designers.',
        type: '√âv√©nement'
      },
      {
        title: 'Salon Immobilier de Guelmim',
        date: '15-17 D√©cembre 2024',
        location: 'Centre Culturel de Guelmim',
        description: 'Retrouvez-nous au premier Salon Immobilier de Guelmim o√π nous pr√©senterons EL BARAKAH et les opportunit√©s d\'investissement dans les provinces du Sud.',
        type: 'Salon'
      },
      {
        title: 'Conf√©rence "L\'Immobilier Durable au Maroc"',
        date: '10 Janvier 2025',
        location: 'H√¥tel Sofitel Casablanca Tour Blanche',
        description: 'Conf√©rence organis√©e par le Groupe Majaidri sur les enjeux du d√©veloppement durable dans l\'immobilier marocain, avec la participation d\'experts nationaux et internationaux.',
        type: 'Conf√©rence'
      }
    ],
    
    press: press.length > 0 ? press : [
      {
        title: 'Groupe Majaidri : L\'immobilier durable en marche',
        source: 'L\'√âconomiste',
        date: '20 Novembre 2024',
        excerpt: 'Article de fond sur notre strat√©gie de d√©veloppement durable et l\'impact de CITT√Ä VERDE sur l\'urbanisme marocain.',
        link: '#'
      },
      {
        title: 'SOLUNA Casablanca : Le luxe urbain red√©fini',
        source: 'Finances News Hebdo',
        date: '18 Novembre 2024',
        excerpt: 'Analyse d√©taill√©e du positionnement de SOLUNA sur le march√© du luxe casablancais.',
        link: '#'
      },
      {
        title: 'EL BARAKAH : Quand l\'immobilier dynamise les r√©gions',
        source: 'La Vie √âco',
        date: '15 Novembre 2024',
        excerpt: 'Reportage sur l\'impact √©conomique et social du projet EL BARAKAH √† Guelmim.',
        link: '#'
      }
    ]
  };
}

// Parse Contact content
export function parseContactContent(): ContactContent {
  const filePath = path.join(process.cwd(), '08-contact.md');
  const fileContents = fs.readFileSync(filePath, 'utf8');
  const { data, content } = matter(fileContents);
  
  // Extract hero section
  const heroTitleMatch = content.match(/# CONTACT - GROUPE MAJAIDRI/);
  const heroSubtitleMatch = content.match(/### Sous-titre\s+(.+)/);
  const heroDescriptionMatch = content.match(/### Description Hero\s+([\s\S]*?)###/);
  
  // Extract main office
  const mainOfficeSection = content.match(/## Section Informations G√©n√©rales([\s\S]*?)---/);
  let mainOffice = {
    title: 'Groupe Majaidri : Toujours Proche de Vous',
    address: 'Casablanca, Maroc',
    phone: '+212 XXX XXX XXX',
    email: 'contact@groupemajaidri.ma',
    hours: 'Lun-Ven 9h00 - 18h00, Sam 9h00 - 16h00'
  };
  
  if (mainOfficeSection) {
    const addressMatch = mainOfficeSection[1].match(/- \*\*Adresse\*\* : (.+?)\n/);
    const phoneMatch = mainOfficeSection[1].match(/- \*\*T√©l√©phone\*\* : (.+?)\n/);
    const emailMatch = mainOfficeSection[1].match(/- \*\*Email\*\* : (.+?)\n/);
    const hoursMatch = mainOfficeSection[1].match(/- \*\*Lundi - Vendredi\*\* : (.+?)\n- \*\*Samedi\*\* : (.+?)\n/);
    
    if (addressMatch) mainOffice.address = addressMatch[1];
    if (phoneMatch) mainOffice.phone = phoneMatch[1];
    if (emailMatch) mainOffice.email = emailMatch[1];
    if (hoursMatch) mainOffice.hours = `Lun-Ven ${hoursMatch[1]}, Sam ${hoursMatch[2]}`;
  }
  
  // Extract sales offices
  const salesOfficesSection = content.match(/## Section Bureaux de Vente par Projet([\s\S]*?)---/);
  const salesOffices = [];
  
  if (salesOfficesSection) {
    const officeMatches = salesOfficesSection[1].match(/### Bureau (.+?)\n\n([\s\S]*?)(?=### Bureau|---)/g);
    
    if (officeMatches) {
      officeMatches.forEach(officeMatch => {
        const nameMatch = officeMatch.match(/### Bureau (.+?)\n/);
        const locationMatch = officeMatch.match(/- \*\*Adresse\*\* : (.+?)\n/);
        const phoneMatch = officeMatch.match(/- \*\*T√©l√©phone\*\* : (.+?)\n/);
        const emailMatch = officeMatch.match(/- \*\*Email\*\* : (.+?)\n/);
        const hoursMatch = officeMatch.match(/- \*\*Horaires (.+?)\*\* : (.+?)\n/);
        
        if (nameMatch) {
          salesOffices.push({
            name: `Bureau ${nameMatch[1]}`,
            location: nameMatch[1].includes('SOLUNA') ? 'Casablanca' : nameMatch[1].includes('EL BARAKAH') ? 'Guelmim' : 'Benslimane',
            address: locationMatch ? locationMatch[1] : '',
            phone: phoneMatch ? phoneMatch[1] : '+212 XXX XXX XXX',
            email: emailMatch ? emailMatch[1] : `${nameMatch[1].toLowerCase().replace(' ', '')}@groupemajaidri.ma`,
            hours: hoursMatch ? hoursMatch[2] : '7j/7 9h-19h'
          });
        }
      });
    }
  }
  
  // Extract team
  const teamSection = content.match(/## Section √âquipe Commerciale([\s\S]*?)---/);
  const teamMembers = [];
  
  if (teamSection) {
    const memberMatches = teamSection[1].match(/#### (.+?)\n([\s\S]*?)(?=#### |---)/g);
    
    if (memberMatches) {
      memberMatches.forEach(memberMatch => {
        const nameMatch = memberMatch.match(/#### (.+?)\n/);
        const positionMatch = memberMatch.match(/- \*\*(.+?)\*\* : (.+?)\n/);
        const phoneMatch = memberMatch.match(/- \*\*T√©l√©phone\*\* : (.+?)\n/);
        const emailMatch = memberMatch.match(/- \*\*Email\*\* : (.+?)\n/);
        const specialtiesMatch = memberMatch.match(/- \*\*Sp√©cialit√©s\*\* : (.+?)\n/);
        
        if (nameMatch && positionMatch) {
          teamMembers.push({
            name: nameMatch[1],
            position: positionMatch[2],
            phone: phoneMatch ? phoneMatch[1] : '+212 XXX XXX XXX',
            email: emailMatch ? emailMatch[1] : 'contact@groupemajaidri.ma',
            specialties: specialtiesMatch ? specialtiesMatch[1].split(', ') : ['Conseil immobilier']
          });
        }
      });
    }
  }
  
  // Extract form
  const formSection = content.match(/## Section Formulaires de Contact([\s\S]*?)---/);
  const formFields = [];
  
  if (formSection) {
    const generalFormMatch = formSection[1].match(/### Formulaire de Contact G√©n√©ral([\s\S]*?)###/);
    
    if (generalFormMatch) {
      const requiredFieldsMatch = generalFormMatch[1].match(/#### Informations Requises([\s\S]*?)####/);
      const demandFieldsMatch = generalFormMatch[1].match(/#### Votre Demande([\s\S]*?)####/);
      
      if (requiredFieldsMatch) {
        const fieldMatches = requiredFieldsMatch[1].match(/- \*\*(.+?)\*\* : (.+?)\n/g);
        
        if (fieldMatches) {
          fieldMatches.forEach(fieldMatch => {
            const parts = fieldMatch.match(/- \*\*(.+?)\*\* : (.+?)\n/);
            
            if (parts) {
              formFields.push({
                name: parts[1].toLowerCase().replace(/\s+/g, '_'),
                label: parts[1],
                type: parts[1].includes('Email') ? 'email' : parts[1].includes('T√©l√©phone') ? 'tel' : 'text',
                required: parts[2].includes('obligatoire')
              });
            }
          });
        }
      }
      
      if (demandFieldsMatch) {
        const projectFieldMatch = demandFieldsMatch[1].match(/- \*\*Projet d'int√©r√™t\*\* :([\s\S]*?)- \*\*Type/);
        
        if (projectFieldMatch) {
          const options = projectFieldMatch[1].match(/- (.+?)\n/g);
          
          if (options) {
            formFields.push({
              name: 'projet',
              label: 'Projet d\'int√©r√™t',
              type: 'select',
              required: false,
              options: options.map(option => option.replace(/- /, '').trim())
            });
          }
        }
        
        formFields.push({
          name: 'message',
          label: 'Message',
          type: 'textarea',
          required: true
        });
      }
    }
  }
  
  return {
    title: data.title || 'Contact Groupe Majaidri | Bureaux Vente SOLUNA EL BARAKAH CITT√Ä VERDE | Rendez-vous Immobilier',
    description: data.description || '',
    keywords: data.keywords ? data.keywords.split(', ') : [],
    author: data.author || 'Groupe Majaidri',
    date: data.date || new Date().toISOString(),
    lang: data.lang || 'fr',
    schema_markup: data.schema_markup || '',
    
    heroTitle: 'Contactez-Nous : Votre Projet Nous Tient √† C≈ìur',
    heroSubtitle: heroSubtitleMatch ? heroSubtitleMatch[1] : 'Une √âquipe √† Votre √âcoute pour Concr√©tiser Vos Ambitions',
    heroDescription: heroDescriptionMatch ? heroDescriptionMatch[1].trim() : 'Que vous souhaitiez d√©couvrir nos projets, obtenir des conseils personnalis√©s, planifier une visite ou simplement nous poser une question, notre √©quipe d\'experts est √† votre disposition.',
    
    mainOffice: mainOffice,
    
    salesOffices: {
      title: 'Nos Bureaux de Vente : Proximit√© et Expertise',
      offices: salesOffices.length > 0 ? salesOffices : [
        {
          name: 'Bureau SOLUNA',
          location: 'Casablanca',
          address: 'R√©sidence SOLUNA, Casablanca',
          phone: '+212 XXX XXX XXX',
          email: 'soluna@groupemajaidri.ma',
          hours: 'Lun-Sam 9h-19h, Dim 10h-16h'
        },
        {
          name: 'Bureau EL BARAKAH',
          location: 'Guelmim',
          address: 'Avenue Mohammed V, Guelmim',
          phone: '+212 XXX XXX XXX',
          email: 'elbarakah@groupemajaidri.ma',
          hours: 'Lun-Sam 9h-18h'
        },
        {
          name: 'Bureau CITT√Ä VERDE',
          location: 'Benslimane',
          address: 'Sur site, Route du Golf, Benslimane',
          phone: '+212 XXX XXX XXX',
          email: 'cittaverde@groupemajaidri.ma',
          hours: '7j/7 9h-19h'
        }
      ]
    },
    
    team: {
      title: 'Notre √âquipe : Des Experts √† Votre Service',
      members: teamMembers.length > 0 ? teamMembers : [
        {
          name: 'Directeur Commercial',
          position: 'Direction Commerciale',
          phone: '+212 XXX XXX XXX',
          email: 'direction.commerciale@groupemajaidri.ma',
          specialties: ['Strat√©gie commerciale', 'grands comptes']
        },
        {
          name: 'Conseiller SOLUNA',
          position: 'Conseiller Immobilier',
          phone: '+212 XXX XXX XXX',
          email: 'soluna.ventes@groupemajaidri.ma',
          specialties: ['Immobilier de luxe', 'investissement']
        },
        {
          name: 'Conseiller EL BARAKAH',
          position: 'Conseiller Immobilier',
          phone: '+212 XXX XXX XXX',
          email: 'elbarakah.ventes@groupemajaidri.ma',
          specialties: ['D√©veloppement r√©gional', 'MRE']
        },
        {
          name: 'Conseiller CITT√Ä VERDE',
          position: 'Conseiller Immobilier',
          phone: '+212 XXX XXX XXX',
          email: 'cittaverde.ventes@groupemajaidri.ma',
          specialties: ['Terrains', 'construction', '√©cologie']
        }
      ]
    },
    
    form: {
      title: 'Contactez-Nous : Choisissez Votre Pr√©f√©rence',
      description: 'Pour toute demande d\'information, de rendez-vous ou de documentation, veuillez remplir le formulaire ci-dessous.',
      fields: formFields.length > 0 ? formFields : [
        {
          name: 'nom',
          label: 'Nom complet',
          type: 'text',
          required: true
        },
        {
          name: 'email',
          label: 'Email',
          type: 'email',
          required: true
        },
        {
          name: 'telephone',
          label: 'T√©l√©phone',
          type: 'tel',
          required: false
        },
        {
          name: 'projet',
          label: 'Projet d\'int√©r√™t',
          type: 'select',
          required: false,
          options: [
            'SOLUNA Casablanca',
            'EL BARAKAH Guelmim',
            'CITT√Ä VERDE Benslimane',
            'Information g√©n√©rale'
          ]
        },
        {
          name: 'message',
          label: 'Message',
          type: 'textarea',
          required: true
        }
      ]
    }
  };
}

// Get all projects
export function getAllProjects(): Project[] {
  const soluna = parseSolunaContent();
  const elBarakah = parseElBarakahContent();
  const cittaVerde = parseCittaVerdeContent();
  
  return [
    {
      id: 'soluna',
      name: 'SOLUNA',
      subtitle: 'L\'Harmonie C√©leste',
      location: 'Casablanca',
      type: 'R√©sidences de Prestige',
      description: 'Une symphonie architecturale o√π chaque d√©tail r√©v√®le un raffinement absolu. SOLUNA incarne l\'excellence √† l\'√©tat pur, avec des finitions nobles et des espaces pens√©s pour l\'art de vivre.',
      image: 'https://images.unsplash.com/photo-1545324418-cc1a3fa10c00?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80',
      theme: 'soluna',
      features: [
        'Mat√©riaux nobles import√©s d\'Italie',
        'Domotique int√©gr√©e derni√®re g√©n√©ration',
        'Espaces wellness privatifs',
        'Conciergerie 24h/7j'
      ],
      stats: {
        surface: '85-180m¬≤',
        units: '120 appartements',
        delivery: 'T4 2025'
      },
      priceRange: '850K - 3.5M Dhs'
    },
    {
      id: 'el-barakah',
      name: 'EL BARAKAH',
      subtitle: 'La B√©n√©diction Familiale',
      location: 'Guelmim',
      type: 'R√©sidences Familiales',
      description: 'Un √©crin de bonheur familial o√π chaque espace respire la s√©r√©nit√©. EL BARAKAH transforme le quotidien en moments pr√©cieux, avec des √©quipements pens√©s pour toute la famille.',
      image: 'https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?ixlib=rb-4.0.3&auto=format&fit=crop&w=2053&q=80',
      theme: 'barakah',
      features: [
        'Aires de jeux premium s√©curis√©es',
        'Espaces verts th√©matiques',
        'Club house familial',
        'Services de garde d\'enfants'
      ],
      stats: {
        surface: '60-150m¬≤',
        units: '80 appartements',
        delivery: 'T2 2025'
      },
      priceRange: '320K - 680K Dhs'
    },
    {
      id: 'citta-verde',
      name: 'CITT√Ä VERDE',
      subtitle: 'L\'√âco-Luxe Italien',
      location: 'Benslimane',
      type: 'Lotissement √âcologique',
      description: 'L\'alliance parfaite entre √©l√©gance italienne et innovation √©cologique. CITT√Ä VERDE red√©finit le luxe durable avec des technologies vertes int√©gr√©es.',
      image: 'https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80',
      theme: 'verde',
      features: [
        'Panneaux solaires int√©gr√©s',
        'Syst√®me de r√©cup√©ration d\'eau',
        'Jardins bioclimatiques',
        'Mobilit√© √©lectrique'
      ],
      stats: {
        surface: '200-800m¬≤',
        units: '45 terrains',
        delivery: 'Par phases'
      },
      priceRange: '180K - 450K Dhs'
    }
  ];
}